<style>
  #attach_file > div {
    float: left;
  }
  .or_delim {
    margin: 20px;
  }

  #select_file {
    margin-top: 40px;
  }
  #files {
    margin-top: 10px;
    border: 1px solid white;
    padding: 0 10px;
  }

  #files li {
    margin: 10px 0;
    padding: 10px 0;
    border-bottom: 1px solid white;
  }

  #files li:last-child {
    border: none;
  }

  #apology {
    border: 1px solid green;
    padding: 10px;
  }
</style>
<h2>Attach a file</h2>
<p id="apology">
  Sorry for the pop-up, we're working on some flashy styling.<br />
  To attach a file, either link a remote path, upload a new file or select
  a file you've previously uploaded.
</p>
<div id="attach_file" class="clearfix">
  <div>
    <h3>Remote file:</h3>
    <%= form_for(@attachment) do |f| %>
      <%= f.text_field :remote_path %>
      <%= f.hidden_field :attachable_id %>
      <%= f.hidden_field :attachable_type %>
      <%= f.hidden_field :attachment_type %>
      <br />
      <%= f.submit "Link", :class => "btn" %>
    <% end %>
  </div>
  <div class="or_delim">
    OR
  </div>
  <div>
    <h3>Upload a file:</h3>
      <%#= render "user_file_uploads/form" %>
  </div>
</div>
<% if @files.count > 0 %>
<div id="select_file">
  <h3>Select an uploaded file</h3>
  <ul id="files">
    <% @files.each do |user_file| %>
      <li>
        <%= user_file.file_name %>
        <% if user_file.is_an_image? %>
        -
        <img src="<%= user_file.file_path %>" />
        <% end %>
        -
        <%= link_to "Select", {:action => :create, :file_id => user_file.id}, :method => :post %>
      </li>
    <% end %>
  </ul>
</div>
<% end %>
